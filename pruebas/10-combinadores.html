<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Prueba 10: Combinadores y Reglas Complejas</title>
</head>
<body>
    <a href="../index.html" style="display: inline-block; margin-bottom: 20px; text-decoration: none; color: #333;">← Volver al Índice</a>
    <h1>Prueba 10: Combinadores y @supports</h1>
    <p>Objetivo: Verificar combinadores (>, +, ~), selectores de atributo y reglas @supports.</p>

    <div id="contenedor-prueba"></div>

    <script type="module">
        import crear_grupo from "../fuente/grupo_de_elementos_para_documentos_de_hipertexto.js"

        const grupo = crear_grupo()
        const contenedor = document.getElementById("contenedor-prueba")

        // Estructura:
        // .padre
        //   -> .hijo-directo (span)
        //   -> .hijo-directo-2 (span)
        //   -> .contenedor-interno (div)
        //      -> .nieto (p)
        //   -> input[type="text"]
        
        const padre = grupo.elemento({
            tagName: "div",
            classList: ["padre"],
            innerHTML: `
                <h3>Prueba de Combinadores:</h3>
                
                <!-- 1. Hijo Directo (>) -->
                <span class="hijo-directo" style="display: block; margin-bottom: 5px;">
                    1. Hijo Directo (Debe ser <strong>AZUL</strong>)
                </span>
                
                <!-- 2. Hermano Adyacente (+) -->
                <span class="hijo-directo" style="display: block; margin-bottom: 15px;">
                    2. Segundo Hijo Directo (Debe ser <strong>ROJO y Subrayado</strong>)
                </span>

                <!-- 3. @supports y anidamiento -->
                <div class="contenedor-interno">
                    <p class="nieto">3. Nieto (Debe tener fondo <strong>GRIS</strong> y borde punteado)</p>
                </div>

                <!-- 4. Selectores de Atributo -->
                <p style="margin-top: 15px; margin-bottom: 5px;">4. Input Texto (Debe tener borde <strong>VIOLETA</strong>):</p>
                <input type="text" value="Soy Violeta" readonly>

                <!-- 5. Hermano General (~) -->
                <p style="margin-top: 15px; margin-bottom: 5px;">5. Checkbox (Debe tener outline <strong>NARANJA</strong>):</p>
                <input type="checkbox" checked>
            `
        })

        contenedor.appendChild(padre)

        grupo.estilos({
            reglas: {
                ".padre": {
                    padding: "20px",
                    border: "1px solid #ccc",
                    
                    // 1. Combinador de hijo directo (>)
                    // Como .padre tiene el data-id, esto debe funcionar.
                    "& > .hijo-directo": {
                        color: "blue",
                        fontWeight: "bold"
                    },

                    // 2. Combinador de hermano adyacente (+)
                    // Selecciona el segundo span que va justo después del primero
                    "& > .hijo-directo + .hijo-directo": {
                        color: "red", // El segundo hijo debe ser rojo
                        textDecoration: "underline"
                    }
                },

                // 3. Selector de Atributo
                // input[type="text"]
                // Ojo: los inputs creados con innerHTML NO tienen data-id.
                // Así que el selector debe ser descendiente: [data-id] input[...]
                // Si escribimos 'input[type="text"]', el generador produce:
                // 'input[type="text"][data-id], [data-id] input[type="text"]'
                // La segunda parte debería atraparlo.
                'input[type="text"]': {
                    border: "2px solid violet",
                    marginTop: "10px",
                    display: "block"
                },

                // 4. Selector General de Hermanos (~)
                // Selecciona checkboxes que estén después de un input text
                'input[type="text"] ~ input[type="checkbox"]': {
                    outline: "2px solid orange" // Debería tener borde naranja
                },

                // 5. Regla @supports
                "@supports (display: grid)": {
                    ".contenedor-interno": {
                        display: "grid",
                        backgroundColor: "#eee",
                        padding: "10px",
                        marginTop: "10px",
                        border: "1px dotted #333"
                    }
                }
            }
        })
    </script>
</body>
</html>